---
apiVersion: v1
kind: Service
metadata:
  name: mastodon-postgres
  namespace: mastodon
  labels:
    app: mastodon-postgres
    app.kubernetes.io/name: mastodon-postgres
    app.kubernetes.io/instance: mastodon-postgres
    app.kubernetes.io/part-of: mastodon
    app.kubernetes.io/component: database
    app.kubernetes.io/managed-by: helm
spec:
  ports:
    - name: tcp-postgres
      port: 5432
      targetPort: tcp-postgres
  selector:
    app: mastodon-postgres
---
apiVersion: v1
kind: Service
metadata:
  name: mastodon-postgres-metrics
  namespace: mastodon
  labels:
    app: mastodon-postgres
    app.kubernetes.io/name: mastodon-postgres
    app.kubernetes.io/instance: mastodon-postgres
    app.kubernetes.io/part-of: mastodon
    app.kubernetes.io/component: metrics
    app.kubernetes.io/managed-by: helm
spec:
  ports:
    - name: pmetrics
      port: 9187
      targetPort: pmetrics
  selector:
    app: mastodon-postgres
